# Валідація моделі

Валідаційний конвеєр гарантує відповідність симуляцій публічним фізіологічним даним.

## Вхідні дані
- CLI `neuromotorica simulate` генерує JSON-результати із серіями стимуляцій.
- Опція `--fft-threshold` у CLI дозволяє керувати порогом переходу до FFT-конволюції для довгих сигналів.
- `sample_data/` містить приклади референсних сценаріїв для регресійних тестів.

## Метрики
| Метрика | Опис | Джерело діапазонів |
| --- | --- | --- |
| `twitch_amplitude` | Амплітуда одиночного скорочення | `data/benchmarks/physio_ranges.json` |
| `tetanus_ratio` | Відношення тетанічної до одиночної відповіді | Літературні діапазони (м'язові дослідження) |
| `failure_rate` | Частка невдалих передавань | Експериментальні дані NMJ |
| `snr` | Співвідношення сигнал/шум | Розрахунок на основі вихідних сигналів |
| `jitter_ms` | Коливання латентності відповіді | Клінічні вимірювання ЕМГ |

## Автоматична перевірка
- Використовуйте `neuromotorica validate-model` для швидкого порівняння різних моделей.
- Приклад виходу:
  ```json
  {
    "profile": "healthy",
    "twitch_amplitude": 0.42,
    "tetanus_ratio": 3.1,
    "failure_rate": 0.01,
    "within_range": true
  }
  ```
- Поле `within_range` показує, чи всі метрики лежать в еталонних межах.

## Розширена аналітика
- `neuromotorica analyze` — будує CSV/Parquet із серіями метрик для довгих симуляцій.
- Звіти CI зберігаються як артефакти (coverage, метрики, графіки).

## Регресійні тести
- Папка `tests/validation/` містить property-based сценарії з перевіркою меж.
- При додаванні нової патології оновлюйте еталонні діапазони в `data/benchmarks/physio_ranges.json`.
