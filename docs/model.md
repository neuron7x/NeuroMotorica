# Модель нейром'язового з'єднання

Модуль `neuromotorica.model` містить кілька взаємопов'язаних класів, що описують NMJ та м'язові властивості.

## NMJ (ACh-only)
- Нормалізоване альфа-ядро для перетворення спайків у безперервний сигнал.
- Фільтрація низьких частот (RC), кліп виходу у [0, 1].
- Призначення: базовий контроль, референт для ко-трансмісії.

## EnhancedNMJ (ACh + Hist)
- Додає гістаміновий канал з окремим ядром та часовими константами.
- Синергія моделюється як адитивна сума + перехресний множник.
- Вихід лімітується в діапазоні [0, 1.5], що відповідає спостереженим посиленим відповідям.

## OptimizedEnhancedNMJ
- Використовує zero-phase biquad для швидкої фільтрації без фазових спотворень.
- Нелінійна взаємодія ACh×Hist з адаптивною нормалізацією залежно від числа активних моторних одиниць.
- Параметри оптимізуються через профілювання (`neuromotorica optimize`).

## Muscle
- Композиція моторних одиниць (MU) із різними масштабами.
- Функції довжина–напруга та швидкість–напруга реалізовані як безрозмірні криві з параметрами калібрування.
- Пасивна складова запобігає нульовій напрузі при розтягуванні.

## Параметри
| Модель | Основні параметри | Типові значення |
| --- | --- | --- |
| `NMJ` | `tau_rise`, `tau_decay`, `dt` | 0.6–1.2 мс / 3–6 мс / 1e-4 с |
| `EnhancedNMJ` | `hist_gain`, `hist_tau`, `interaction_gain` | 0.3–0.6 / 8–15 мс / 0.2–0.4 |
| `OptimizedEnhancedNMJ` | `biquad_cutoff`, `biquad_q` | 180–220 Гц / 0.55–0.8 |
| `Muscle` | `passive_gain`, `max_force`, `topography_factor` | 0.05–0.12 / індивідуально / 0.8–1.3 |

## Персоналізація
- Параметри можуть калібруватися з використанням даних з ЕМГ або механоміографії.
- API `POST /policy/outcome` зберігає результати підказок, що дозволяє оновлювати моделі адаптивно.
- Доступні профілі: healthy, myasthenia, ALS (див. `data/` та CLI `simulate --profile`).
